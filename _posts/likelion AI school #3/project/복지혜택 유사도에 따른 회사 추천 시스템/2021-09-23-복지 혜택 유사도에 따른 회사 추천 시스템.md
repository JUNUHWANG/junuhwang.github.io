---
title: "복지 혜택 유사도에 따른 회사 추천 시스템"
categories:
  - python
  - likelion
  - project
  - Data analysis
  - Modeling
tags:
  - python
  - likelion
  - Data analysis
  - TF-IDF
  - Cosine similarity
---
## 프로젝트 진행 기간
- 2021-07-06(화) ~ 2021-07-12()

## 데이터 분석 목적
- 원하는 기업과 복지혜택이 유사한 기업을 찾음으로 지원의 폭을 넓혀주는 역할을 기대
- 멋쟁이 사자처럼 강의 내 팀 프로젝트 진행 내용

## 데이터 출처
- https://data101.oopy.io/startup-benefits
- 로켓펀치 크롤링을 통해 100억 이상 스타트업을 조회 후 채용공고가 올라 온 기업에 한하여 사내 복지 항목 수집

## 사용 라이브러리
- Numpy
- Pandas
- Sklearn
- Seaborn
- Matplotlib

## 분석 프로세스
- 데이터 전처리
- 사용자가 원하는 기업과 복지혜택의 우선순위 입력
- 입력 내용을 토대로 유사 기업 분석 진행
- 가중치 평균에 대한 시각화 진행
- 복지 혜택이 유사한 상위 10개 社 출력

## 데이터 확인 및 전처리 과정
- 마지막 3개열 삭제
- 출/퇴근 시간이 있는 경우, 정시근무로 인식하고 시간 삭제
- NaN의 경우, Vectorizer 진행 시 자동으로 삭제되어 Cosine Similarity 진행 시 계산이 진행되지 않음
- NaN는 'Empty'로 변경
 
![image](https://user-images.githubusercontent.com/88296152/134449039-e49afcfb-316d-42c4-a690-fa7d5882adc2.png)

## 사용자의 원하는 기업 및 복지혜택의 우선순위 입력
- 기준이 되는 원하는 회사의 경우 영문으로 입력
- 띄어쓰기를 해도 문제가 없도록 코드 작성
- 우선순위에 대해 번호로 입력하고 전 순위와 중복되거나 선택지 밖으로 벗어날 시 재입력하도록 설계

![image](https://user-images.githubusercontent.com/88296152/134466342-0accb9a3-7d92-41cf-a39b-b3141f8ff6dc.png)

## 입력 내용을 토대로 유사 기업 분석 진행
- 입력받은 기업 기준으로 Cosine similarity 진행
- CountVectorizer을 이용하여 분석 진행
- TF-IDF를 사용하지 않은 이유는 키워드만 들어있었기 때문
- 복지혜택의 우선순위에 따라 가중평균법 이용하여 총점 도출
- 1순위는 0.5, 2순위는 0.3, 3순위는 0.2의 가중평균을 이용하여 총점 1점에 맞춰 설계

![image](https://user-images.githubusercontent.com/88296152/134650065-69bef894-a74b-4e13-a478-73d849bed8a1.png)

## 가중치 평균에 대한 시각화 진행
- 항목별, 총점별 시각화 진행
- 하기 그림과 같이 기준이 되는 기업 포함 총점 기준 상위 10개 社 시각화 진행
- 0-1은 일치 수준에 대해 나타냄 (1에 가까울수록 조건 일치)
- APRIL 社 기준 Peoplefund, Madit 순으로 사용자가 선택한 우선순위에 따른 복지혜택이 유사함

![image](https://user-images.githubusercontent.com/88296152/134751877-be6ee0b4-2b20-46e7-b01d-67116e7771ec.png)
![image](https://user-images.githubusercontent.com/88296152/134752011-29923a5e-4a57-47b5-961e-24019c573e15.png)
![image](https://user-images.githubusercontent.com/88296152/134751938-444aeaac-37df-4292-9c76-77ff0015bc9a.png)


## 복지 혜택이 유사한 상위 10개 社 출력
- 위 결과를 토대로 기준 기업 포함 복지혜택이 유사한 상위 10개 社 

![image](https://user-images.githubusercontent.com/88296152/134752018-fd83ae85-b365-4a2f-ab34-27b8090150b2.png)

## 코드 특이사항
- 유저가 각기 다른 방법으로 회사입력을 할 경우를 고려함
  * 띄어쓰기 할 경우 해당 내용을 띄어쓰기 없이 받아들이는 방법을 채택
  * 대문자 입력 시, 소문자로 받아들이는 방법 채택 
 
![image](https://user-images.githubusercontent.com/88296152/134761218-e599a439-ad8c-40d2-9cfd-c15e4c924f30.png)

  * 우선순위의 경우, 번호로 입력하게 진행하였으며 오류 및 중복 시 재입력 진행하는 방법 채택

![image](https://user-images.githubusercontent.com/88296152/134761259-8d59422f-784a-401f-b94a-fd5bc6b5cf9d.png)


- sklearn 라이브러리 내의 코사인 유사도 함수의 경우 DataFrame으로 받아서 연산을 진행함.
- 하기 2가지 문제로 인하여 sklearn 내부 함수를 이용하지 않고 함수를 구현하여 사용 
  * array 형식으로 연산을 진행
  * 분모가 0일 경우 RuntimeWarning: invalid value encountered in true_divide 오류 발생
- 기준 회사를 먼저 정하고 우선순위 순서로 CountVectorizer을 진행한 array로 연산을 진행함
- 분모가 0일 경우를 대비하여 Seterr 함수를 사용하여 제어함
- 최종 출력 DataFrame으로는 기준 회사에 대한 유사 회사 순위로 sort하여 도출

![image](https://user-images.githubusercontent.com/88296152/134760662-4607161f-2d8b-4090-894c-22b5a6680f07.png)
![image](https://user-images.githubusercontent.com/88296152/134760913-cf3ae5e1-3811-4890-b1e7-0ae409df858a.png)

## 진행 시 고려 및 어려웠던 점
- 유저 입력 시 최대한 오류 없이 Input 값을 받을 수 있도록 고안함
- 기업 간 Cosine similarity 진행할 때에 도출 방법에 대해 2가지 안을 고민함
  * 1안 : 각 기업별 모든 Cosine similarity를 미리 구하고 DataFrame에서 불러오는 방법
  * 2안 : 기준 회사 입력 시 그 때마다 계산하여 출력하는 방법
- 위 2가지를 고민하였을 때에 2안이 더 나을 것이라고 판단하여 2안으로 진행함
